import{j as e,a as x,e as c,r as p}from"./index-CGgNvSK3.js";import{f as j,r as a}from"./vendor-DWydibsD.js";import"./icons-Dgj2_Wy7.js";function w(){const l=j(),[r,d]=a.useState(""),[t,m]=a.useState(""),[n,o]=a.useState("");a.useEffect(()=>{const s=new URLSearchParams(window.location.search),i=s.get("error"),u=s.get("retry_in");i==="rate_limit"?l(`/rate-limit?retry_in=${u||15}`):i==="oauth_failed"&&o("OAuth authentication failed. Please try again."),i&&i!=="rate_limit"&&window.history.replaceState({},"","/login")},[l]);const h=async s=>{s.preventDefault(),o("");try{await x.post(c.auth.login,{email:r,password:t}),l("/")}catch(i){o(p.getErrorMessage(i))}},g=()=>{window.location.href=c.auth.googleAuth};return e.jsx("div",{className:"login-container",children:e.jsx("section",{className:"login-hero hero-section",children:e.jsx("div",{className:"container",children:e.jsx("div",{children:e.jsxs("div",{className:"login-content",children:[e.jsxs("div",{className:"login-text-section",children:[e.jsx("h1",{className:"hero-title md:text-5xl",children:"Welcome back"}),e.jsx("p",{className:"hero-subtitle",style:{margin:"0 auto 1.5rem auto"},children:"Pick up where you left off. Your insights await."}),e.jsxs("div",{className:"login-dev-tip",children:[e.jsx("span",{className:"font-semibold",children:"Tip:"})," In development, verification links are printed in the server console."]})]}),e.jsx("div",{children:e.jsxs("div",{className:"login-form-container",children:[e.jsxs("div",{className:"login-form-header",children:[e.jsx("div",{className:"login-avatar",children:"P"}),e.jsx("h2",{className:"login-form-title",children:"Welcome back"}),e.jsx("p",{className:"login-form-subtitle",children:"Sign in to your PeakSelf account"})]}),e.jsxs("div",{className:"login-form-content",children:[e.jsxs("button",{onClick:g,className:"login-oauth-btn",children:[e.jsxs("svg",{className:"login-oauth-icon",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),e.jsx("span",{children:"Continue with Google"})]}),e.jsx("div",{className:"login-divider",children:e.jsx("div",{className:"login-divider-text",children:e.jsx("span",{children:"or sign in with email"})})}),e.jsxs("form",{onSubmit:h,className:"login-form",children:[e.jsxs("div",{className:"login-form-fields",children:[e.jsxs("div",{className:"login-form-group",children:[e.jsx("label",{className:"login-form-label",children:"Email address"}),e.jsx("input",{type:"email",className:"login-form-input",placeholder:"you@example.com",value:r,onChange:s=>d(s.target.value),required:!0})]}),e.jsxs("div",{className:"login-form-group",children:[e.jsxs("div",{className:"login-password-header",children:[e.jsx("label",{className:"login-form-label",children:"Password"}),e.jsx("a",{href:"#",className:"login-forgot-password",children:"Forgot password?"})]}),e.jsx("input",{type:"password",className:"login-form-input",placeholder:"Enter your password",value:t,onChange:s=>m(s.target.value),required:!0})]})]}),e.jsx("div",{className:"login-submit-wrapper",children:e.jsx("button",{type:"submit",className:"login-submit-btn",children:"Sign in"})})]}),e.jsx("div",{className:"login-form-footer",children:e.jsxs("p",{children:["Don't have an account?"," ",e.jsx("a",{href:"/register",className:"login-signup-link",children:"Create account"})]})})]}),n&&e.jsx("div",{className:`login-message ${n==="Logged in"?"success":"error"}`,children:n})]})})]})})})})})}export{w as default};
