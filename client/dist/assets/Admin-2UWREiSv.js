import{j as e,a as k,e as N,r as z,u as q,w as G,b as ee}from"./index-D7ZXaGj6.js";import{r as a,R as te,f as se,u as ie,c as re,d as W,N as ne}from"./vendor-DWydibsD.js";import{j as Q,k as ae,a as le,I as oe,F as de,Y as ce,l as he,m as X,E as me,B as xe,n as ue,o as fe,p as pe,q as ge,r as je,R as ye,D as K,b as ve,Z as be,s as J,t as ke,u as we,v as Se,X as Ne,M as Ce}from"./icons-L7UbJG9y.js";function _e(){const[s,n]=a.useState("general"),[o,d]=a.useState("neutral"),m=a.useMemo(()=>[{key:"neutral",name:"Neutral",tones:["#111","#333","#888","#e0e0e0","#fff"]},{key:"dim",name:"Dim",tones:["#111","#222","#555","#cfcfcf","#f6f6f6"]},{key:"contrast",name:"High Contrast",tones:["#000","#111","#666","#dddddd","#ffffff"]},{key:"mono",name:"Mono",tones:["#111","#444","#777","#bbbbbb","#f2f2f2"]}],[]),h=[{key:"general",label:"General"},{key:"appearance",label:"Appearance"},{key:"security",label:"Security"},{key:"email",label:"Email"}];return e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{className:"traffic-toolbar",children:[e.jsx("div",{className:"toolbar-top",children:e.jsx("div",{className:"title",children:"Settings"})}),e.jsx("div",{className:"traffic-chip-row",children:h.map(i=>e.jsx("button",{type:"button",className:`traffic-chip ${s===i.key?"active":""}`,onClick:()=>n(i.key),children:i.label},i.key))})]}),e.jsxs("div",{style:{background:"#fff",border:"1px solid #d0d0d0",borderRadius:12,padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[s==="general"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:20,fontWeight:800,margin:0,marginBottom:4},children:"General Settings"}),e.jsx("p",{style:{fontSize:13,color:"#666",margin:0},children:"Basic configuration for your site"})]}),e.jsxs("div",{style:{display:"grid",gap:"1.25rem",maxWidth:600},children:[e.jsx(E,{label:"Site Title",children:e.jsx("input",{type:"text",placeholder:"PeakSelf",style:B})}),e.jsx(E,{label:"Support Email",children:e.jsx("input",{type:"email",placeholder:"support@example.com",style:B})}),e.jsx(E,{label:"Tagline",children:e.jsx("textarea",{rows:3,placeholder:"A short description of your site",style:B})}),e.jsx(E,{label:"Maintenance Mode",description:"Enable this to show a maintenance page to visitors",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",style:{width:18,height:18}}),e.jsx("span",{style:{fontSize:13},children:"Enable maintenance mode"})]})})]})]}),s==="appearance"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:20,fontWeight:800,margin:0,marginBottom:4},children:"Appearance"}),e.jsx("p",{style:{fontSize:13,color:"#666",margin:0},children:"Customize the look and feel"})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem",maxWidth:600},children:[e.jsx(E,{label:"Theme",description:"Choose between light, dark, or auto mode",children:e.jsx("div",{style:{display:"flex",gap:12},children:["Light","Auto","Dark"].map(i=>e.jsxs("label",{style:{flex:1,padding:"12px",border:"2px solid #d0d0d0",borderRadius:8,cursor:"pointer",textAlign:"center",fontSize:13,fontWeight:600,transition:"all 0.2s ease",background:i==="Light"?"#111":"#fff",color:i==="Light"?"#fff":"#111"},children:[e.jsx("input",{type:"radio",name:"theme",defaultChecked:i==="Light",style:{display:"none"}}),i]},i))})}),e.jsx(E,{label:"Color Palette",description:"Select your preferred color scheme",children:e.jsx("div",{style:{display:"grid",gap:12},children:m.map(i=>e.jsxs("button",{type:"button",onClick:()=>d(i.key),style:{padding:"12px 16px",border:o===i.key?"2px solid #111":"1px solid #d0d0d0",borderRadius:8,background:"#fff",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s ease"},children:[e.jsx("span",{style:{fontWeight:600,fontSize:14},children:i.name}),e.jsx("div",{style:{display:"flex",gap:4},children:i.tones.map((_,j)=>e.jsx("div",{style:{width:20,height:20,background:_,borderRadius:4,border:"1px solid #ddd"}},j))})]},i.key))})})]})]}),s==="security"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:20,fontWeight:800,margin:0,marginBottom:4},children:"Security"}),e.jsx("p",{style:{fontSize:13,color:"#666",margin:0},children:"Authentication and session options"})]}),e.jsxs("div",{style:{display:"grid",gap:"1.25rem",maxWidth:600},children:[e.jsx(E,{label:"JWT Expiry",description:"Number of days before tokens expire",children:e.jsx("input",{type:"number",min:1,max:30,defaultValue:1,style:B})}),e.jsx(E,{label:"Two-Factor Authentication",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",style:{width:18,height:18}}),e.jsx("span",{style:{fontSize:13},children:"Require 2FA for all users"})]})}),e.jsx(E,{label:"Email Login",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,style:{width:18,height:18}}),e.jsx("span",{style:{fontSize:13},children:"Allow login with email and password"})]})})]})]}),s==="email"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:20,fontWeight:800,margin:0,marginBottom:4},children:"Email Configuration"}),e.jsx("p",{style:{fontSize:13,color:"#666",margin:0},children:"Configure email settings and SMTP"})]}),e.jsxs("div",{style:{display:"grid",gap:"1.25rem",maxWidth:600},children:[e.jsx(E,{label:"From Name",children:e.jsx("input",{type:"text",placeholder:"PeakSelf",style:B})}),e.jsx(E,{label:"From Address",children:e.jsx("input",{type:"email",placeholder:"no-reply@example.com",style:B})}),e.jsx(E,{label:"SMTP Configuration",children:e.jsxs("div",{style:{padding:"12px 16px",background:"#f6f6f6",border:"1px solid #d0d0d0",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,marginBottom:2},children:"Status"}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:"Not configured"})]}),e.jsx("button",{className:"btn small",type:"button",children:"Configure"})]})})]})]}),e.jsxs("div",{style:{marginTop:"2rem",paddingTop:"1.5rem",borderTop:"1px solid #e0e0e0",display:"flex",gap:12,justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn secondary",type:"button",children:"Reset Changes"}),e.jsx("button",{className:"btn primary",type:"button",children:"Save Changes"})]})]})]})}const B={width:"100%",padding:"10px 12px",border:"1px solid #d0d0d0",borderRadius:8,fontSize:14,background:"#fff",fontFamily:"inherit",transition:"border-color 0.2s ease",outline:"none"};function E({label:s,description:n,children:o}){return e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,color:"#111",marginBottom:2},children:s}),n&&e.jsx("div",{style:{fontSize:12,color:"#888"},children:n})]}),e.jsx("div",{children:o})]})}const V=({cards:s=8,type:n="stat"})=>{const o={backgroundColor:"#f0f0f0",borderRadius:"8px",animation:"pulse 1.5s ease-in-out infinite"};return n==="content"?e.jsx("div",{className:"card-grid",children:Array.from({length:s}).map((d,m)=>e.jsxs("div",{className:"content-card",style:{minHeight:"150px"},children:[e.jsx("div",{style:{...o,height:"24px",width:"80%",marginBottom:"12px"}}),e.jsx("div",{style:{...o,height:"16px",width:"100%",marginBottom:"8px"}}),e.jsx("div",{style:{...o,height:"16px",width:"90%",marginBottom:"16px"}}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("div",{style:{...o,height:"32px",width:"60px"}}),e.jsx("div",{style:{...o,height:"32px",width:"70px"}}),e.jsx("div",{style:{...o,height:"32px",width:"60px"}})]})]},m))}):e.jsx("div",{className:"card-grid",children:Array.from({length:s}).map((d,m)=>e.jsxs("div",{style:{border:"1px solid #d0d0d0",borderRadius:12,padding:"1.25rem",background:"#fff",boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[e.jsx("div",{style:{...o,width:"60%",height:"14px"}}),e.jsx("div",{style:{...o,width:"20px",height:"20px",borderRadius:"50%"}})]}),e.jsx("div",{style:{...o,height:"28px",width:"50%",marginBottom:"8px"}}),e.jsx("div",{style:{...o,height:"12px",width:"40%"}})]},m))})};function Te(){const[s,n]=a.useState(!0),[o,d]=a.useState(""),[m,h]=a.useState(null);if(a.useEffect(()=>{let j=!1;async function x(){try{const{data:f}=await k.get(N.admin.overview);j||h(f)}catch(f){j||d(z.getErrorMessage(f))}finally{j||n(!1)}}return x(),()=>{j=!0}},[]),s)return e.jsxs("div",{className:"admin-content",children:[e.jsx("div",{className:"traffic-toolbar",children:e.jsx("div",{className:"toolbar-top",children:e.jsx("div",{className:"title",children:"Overview"})})}),e.jsx(V,{cards:8,type:"stat"})]});if(o)return e.jsxs("div",{style:{padding:"1rem",color:"#b91c1c"},children:["Error: ",o]});const i=m||{},_=i.snapshot_at?new Date(i.snapshot_at).toLocaleString():i.source==="live"?"live":"";return e.jsxs("div",{className:"admin-content",children:[e.jsxs("div",{className:"traffic-toolbar",children:[e.jsx("div",{className:"toolbar-top",children:e.jsx("div",{className:"title",children:"Overview"})}),e.jsx("div",{className:"traffic-chip-row",children:e.jsxs("div",{style:{fontSize:12,color:"#666"},children:["Source: ",i.source||"snapshot"," ",_&&`• ${_}`]})})]}),e.jsxs("div",{className:"card-grid",children:[e.jsx(M,{icon:Q,title:"Total Users",value:L(i.total_users),subtitle:i.signups_24h!=null?`+${L(i.signups_24h)} / 24h`:""}),e.jsx(M,{icon:ae,title:"Verified Users",value:L(i.verified_users),subtitle:""}),e.jsx(M,{icon:le,title:"Newsletter Subs",value:L(i.newsletter_total),subtitle:i.newsletter_signups_24h!=null?`+${L(i.newsletter_signups_24h)} / 24h`:""}),e.jsx(M,{icon:oe,title:"Sessions • Instagram",value:L(i.sessions_instagram),subtitle:"last 7 days",color:"#E4405F"}),e.jsx(M,{icon:de,title:"Sessions • Facebook",value:L(i.sessions_facebook),subtitle:"last 7 days",color:"#1877F2"}),e.jsx(M,{icon:ce,title:"Sessions • YouTube",value:L(i.sessions_youtube),subtitle:"last 7 days",color:"#FF0000"}),e.jsx(M,{icon:ze,title:"Sessions • Google",value:L(i.sessions_google),subtitle:"last 7 days",color:"#4285F4"}),e.jsx(M,{icon:he,title:"Sessions • Others",value:L(i.sessions_others),subtitle:"last 7 days",color:"#6366F1"})]}),Array.isArray(i.sessions_others_refs)&&i.sessions_others_refs.length>0&&e.jsxs("div",{style:{border:"1px solid #d0d0d0",borderRadius:12,padding:"1.5rem",background:"#fff",boxShadow:"0 1px 3px rgba(0,0,0,0.08)",marginTop:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid #e5e5e5"},children:[e.jsx(X,{size:18,style:{color:"#000"}}),e.jsx("h3",{style:{fontSize:16,fontWeight:800,color:"#000",margin:0},children:'Top "Others" Referrers'}),e.jsx("span",{style:{fontSize:11,color:"#666",marginLeft:"auto",textTransform:"uppercase",fontWeight:700,letterSpacing:"0.5px"},children:"Last 7 Days"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:i.sessions_others_refs.map((j,x)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"0.75rem",background:"#fff",borderRadius:8,border:"1px solid #ddd",transition:"all 0.2s ease"},onMouseEnter:f=>{f.currentTarget.style.background="#f5f5f5",f.currentTarget.style.borderColor="#999";const y=f.currentTarget.querySelector(".rank-badge"),w=f.currentTarget.querySelector(".link-icon"),p=f.currentTarget.querySelector(".ref-text");y&&(y.style.background="#333"),w&&(w.style.color="#000"),p&&(p.style.color="#000")},onMouseLeave:f=>{f.currentTarget.style.background="#fff",f.currentTarget.style.borderColor="#ddd";const y=f.currentTarget.querySelector(".rank-badge"),w=f.currentTarget.querySelector(".link-icon"),p=f.currentTarget.querySelector(".ref-text");y&&(y.style.background="#000"),y&&(y.style.color="#fff"),w&&(w.style.color="#666"),p&&(p.style.color="#111")},children:[e.jsx("div",{className:"rank-badge",style:{minWidth:24,height:24,borderRadius:"50%",background:"#000",display:"flex",alignItems:"center",justifyContent:"center",fontSize:11,fontWeight:900,color:"#fff",flexShrink:0,transition:"all 0.2s ease"},children:x+1}),e.jsx(me,{className:"link-icon",size:14,style:{color:"#666",flexShrink:0,transition:"all 0.2s ease"}}),e.jsx("span",{className:"ref-text",style:{fontSize:13,color:"#111",fontWeight:600,flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",transition:"all 0.2s ease"},children:String(j)})]},x))})]})]})}function M({icon:s,title:n,value:o,subtitle:d,color:m}){return e.jsxs("div",{style:{border:"1px solid #d0d0d0",borderRadius:12,padding:"1.25rem",background:"#fff",boxShadow:"0 1px 3px rgba(0,0,0,0.08)",transition:"transform 0.2s ease, box-shadow 0.2s ease",cursor:"default"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.12)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.08)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[e.jsx("div",{style:{fontSize:11,color:"#666",textTransform:"uppercase",fontWeight:700,letterSpacing:"0.5px"},children:n}),s&&e.jsx(s,{size:20,style:{color:m||"#666",opacity:.7}})]}),e.jsx("div",{style:{fontSize:28,fontWeight:900,color:"#111",lineHeight:1},children:o}),d&&e.jsx("div",{style:{fontSize:12,color:"#888",marginTop:8},children:d})]})}function ze({size:s=20,style:n}){return e.jsxs("svg",{width:s,height:s,viewBox:"0 0 24 24",style:n,children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}function L(s){if(s==null)return"-";try{return Number(s).toLocaleString()}catch{return String(s)}}const Ee=({rows:s=5,columns:n=5})=>{const o={backgroundColor:"#f0f0f0",borderRadius:"6px",animation:"pulse 1.5s ease-in-out infinite",height:"16px"};return e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsx("tr",{children:Array.from({length:n}).map((d,m)=>e.jsx("th",{children:e.jsx("div",{style:{...o,width:"80%",height:"18px"}})},m))})}),e.jsx("tbody",{children:Array.from({length:s}).map((d,m)=>e.jsx("tr",{children:Array.from({length:n}).map((h,i)=>e.jsx("td",{children:e.jsx("div",{style:{...o,width:i===0?"90%":i===n-1?"60%":"70%"}})},i))},m))})]})})};function Ae(){const s=q(),[n,o]=a.useState("active"),[d,m]=a.useState("all"),[h,i]=a.useState(""),[_,j]=a.useState(!0),[x,f]=a.useState(""),[y,w]=a.useState([]),[p,v]=a.useState(new Set);async function S(){j(!0),f(""),v(new Set);try{const t={};h&&(t.q=h),n==="active"&&d&&d!=="all"&&(t.filter=d);const r=n==="deleted"?N.admin.deletedUsers:N.admin.users,{data:u}=await k.get(G(r,t));w(Array.isArray(u.users)?u.users:[])}catch(t){f(z.getErrorMessage(t))}finally{j(!1)}}a.useEffect(()=>{S()},[h,d,n]);const c=async()=>{const t=await s.prompt("Enter the email address to invite:","Invite User","","user@example.com");if(t)try{const{data:r}=await k.post(N.admin.inviteUser,{email:t});await s.alert(r.message||"Invitation sent","Success"),S()}catch(r){await s.alert(z.getErrorMessage(r),"Error")}},C=()=>{window.open(N.admin.usersCSV,"_blank")},l=async t=>{try{await k.post(N.admin.makeAdmin(t)),S()}catch(r){await s.alert(z.getErrorMessage(r),"Error")}},D=async t=>{try{await k.post(N.admin.removeAdmin(t)),S()}catch(r){await s.alert(z.getErrorMessage(r),"Error")}},R=async t=>{if(await s.confirm("Are you sure you want to delete this user?","Confirm Delete",{variant:"danger"}))try{await k.delete(N.admin.userById(t)),S()}catch(u){await s.alert(z.getErrorMessage(u),"Error")}},I=async t=>{if(await s.confirm("Restore this user?","Confirm Restore",{variant:"primary"}))try{await k.post(N.admin.restoreUser(t)),S()}catch(u){await s.alert(z.getErrorMessage(u),"Error")}},F=async t=>{if(await s.confirm("PERMANENTLY delete this user? This cannot be undone!","Permanent Delete",{variant:"danger",confirmText:"Delete Forever"}))try{await k.delete(N.admin.bulkDelete,{ids:[t]}),S()}catch(u){await s.alert(z.getErrorMessage(u),"Error")}},g=()=>{p.size===y.length?v(new Set):v(new Set(y.map(t=>t.id)))},b=t=>{const r=new Set(p);r.has(t)?r.delete(t):r.add(t),v(r)},A=async()=>{if(!(p.size===0||!await s.confirm(`Restore ${p.size} user(s)?`,"Bulk Restore",{variant:"primary",confirmText:"Restore"})))try{const{data:r}=await k.post(N.admin.bulkRestore,{ids:Array.from(p)});await s.alert(r.message||`Restored ${p.size} users`,"Success"),S()}catch(r){await s.alert(z.getErrorMessage(r),"Error")}},T=async()=>{if(!(p.size===0||!await s.confirm(`PERMANENTLY delete ${p.size} user(s)? This cannot be undone!`,"Bulk Delete",{variant:"danger",confirmText:"Delete Forever"})))try{const{data:r}=await k.delete(N.admin.bulkDelete,{ids:Array.from(p)});await s.alert(r.message||`Deleted ${p.size} users`,"Success"),S()}catch(r){await s.alert(z.getErrorMessage(r),"Error")}};return a.useEffect(()=>{const t=r=>{if((r.ctrlKey||r.metaKey)&&String(r.key).toLowerCase()==="k"){r.preventDefault();const P=document.getElementById("users-search-input");P&&P.focus()}r.key==="Escape"&&i("")};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),e.jsxs("div",{className:"admin-users",children:[e.jsxs("div",{className:"traffic-toolbar",children:[e.jsxs("div",{className:"toolbar-top",children:[e.jsx("div",{className:"title",children:"Users"}),e.jsxs("div",{className:"tabs",children:[e.jsx("button",{className:`tab ${n==="active"?"active":""}`,onClick:()=>o("active"),children:"Active Users"}),e.jsx("button",{className:`tab ${n==="deleted"?"active":""}`,onClick:()=>o("deleted"),children:"Deleted Users"})]})]}),e.jsx("form",{className:"traffic-search-form",onSubmit:t=>{t.preventDefault(),S()},children:e.jsxs("div",{className:"traffic-search",role:"search",children:[e.jsx("span",{className:"search-icon","aria-hidden":!0,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),e.jsx("input",{id:"users-search-input",type:"search",className:"traffic-search-input",placeholder:"Search users by name or email...",value:h,onChange:t=>i(t.target.value),"aria-label":"Search users"}),h&&e.jsx("button",{type:"button",className:"traffic-search-clear","aria-label":"Clear search",title:"Clear",onClick:()=>{i(""),setTimeout(S,0)},children:"×"}),e.jsx("button",{type:"submit",className:"btn primary search-btn",children:"Search"})]})}),e.jsxs("div",{className:"traffic-chip-row",children:[n==="active"&&e.jsxs(e.Fragment,{children:[[{key:"all",label:"All"},{key:"admins",label:"Admins"},{key:"unverified",label:"Unverified"}].map(t=>e.jsx("button",{type:"button",onClick:()=>m(t.key),className:`traffic-chip ${d===t.key?"active":""}`,"aria-pressed":d===t.key,children:t.label},t.key)),e.jsx("button",{type:"button",className:"traffic-chip",onClick:c,children:"Invite User"}),e.jsx("button",{type:"button",className:"traffic-chip",onClick:C,children:"Export CSV"})]}),n==="deleted"&&p.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"chip-info",children:[p.size," selected"]}),e.jsxs("button",{type:"button",className:"traffic-chip primary",onClick:A,children:["Restore Selected (",p.size,")"]}),e.jsxs("button",{type:"button",className:"traffic-chip danger",onClick:T,children:["Permanently Delete (",p.size,")"]})]})]})]}),_&&e.jsx(Ee,{rows:8,columns:5}),x&&!_&&e.jsxs("div",{style:{padding:"0.75rem",color:"#b91c1c"},children:["Error: ",x]}),!_&&!x&&e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[n==="deleted"&&e.jsx("th",{style:{width:"40px"},children:e.jsx("input",{type:"checkbox",checked:y.length>0&&p.size===y.length,onChange:g,"aria-label":"Select all"})}),n==="active"?["Name","Email","Role","Verified","Actions"].map(t=>e.jsx("th",{children:t},t)):["Name","Email","Role","Deleted","Days Ago","Actions"].map(t=>e.jsx("th",{children:t},t))]})}),e.jsxs("tbody",{children:[y.map(t=>e.jsxs("tr",{children:[n==="deleted"&&e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:p.has(t.id),onChange:()=>b(t.id),"aria-label":`Select ${t.email}`})}),e.jsx("td",{children:t.name||"—"}),e.jsx("td",{children:t.email}),e.jsx("td",{children:e.jsx("span",{className:`role ${t.role}`,children:t.role})}),n==="active"?e.jsxs(e.Fragment,{children:[e.jsx("td",{children:t.verified?"Yes":"No"}),e.jsx("td",{children:e.jsxs("div",{className:"row-actions",children:[e.jsx("button",{className:"btn small",onClick:()=>s.alert(JSON.stringify(t,null,2),"User Details"),children:"View"}),t.role!=="admin"?e.jsx("button",{className:"btn small",onClick:()=>l(t.id),children:"Make Admin"}):e.jsx("button",{className:"btn small",onClick:()=>D(t.id),children:"Remove Admin"}),e.jsx("button",{className:"btn small danger",onClick:()=>R(t.id),children:"Remove"})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{children:new Date(t.deleted_at).toLocaleDateString()}),e.jsxs("td",{children:[t.days_deleted," days"]}),e.jsx("td",{children:e.jsxs("div",{className:"row-actions",children:[e.jsx("button",{className:"btn small primary",onClick:()=>I(t.id),children:"Restore"}),e.jsx("button",{className:"btn small danger",onClick:()=>F(t.id),children:"Delete Forever"})]})})]})]},t.id)),y.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:n==="deleted"?7:5,style:{padding:"1rem",color:"#666"},children:n==="deleted"?"No deleted users found.":"No users found."})})]})]})})]})}function Le({onSave:s,onCancel:n,initialPost:o}){const d=q(),[m,h]=a.useState(o?.title||""),[i,_]=a.useState([]),[j,x]=a.useState(!1),[f,y]=a.useState(""),[w,p]=a.useState(""),v=a.useRef(null),S=a.useRef(null),c=a.useRef(null);te.useEffect(()=>{o?.content&&v.current&&(v.current.innerHTML=o.content)},[o]);const C=g=>{document.execCommand(g,!1,null),v.current.focus()},l=()=>{const g=window.getSelection(),b=g.toString();g.rangeCount>0&&(c.current=g.getRangeAt(0).cloneRange()),b&&y(b),x(!0)},D=()=>{x(!1),w&&setTimeout(()=>{if(v.current.focus(),c.current){const b=window.getSelection();b.removeAllRanges(),b.addRange(c.current)}const g=`<a href="${w}" target="_blank" rel="noopener noreferrer">${f||w}</a>`;document.execCommand("insertHTML",!1,g),c.current=null},0),y(""),p("")},R=async g=>{const b=g.target.files[0];if(console.log("File selected:",b),!b){console.log("No file selected");return}if(!b.type.startsWith("image/")){await d.alert("Please select an image file","Invalid File");return}const A=new FileReader;A.onerror=async T=>{console.error("FileReader error:",T),await d.alert("Failed to read image file","Error")},A.onload=async T=>{console.log("File loaded, inserting temp image"),v.current.focus();const t=`<div class="image-wrapper uploading" contenteditable="false" data-temp="true"><img src="${T.target.result}" class="blog-image" alt="Uploading..." /></div>`;document.execCommand("insertHTML",!1,t),console.log("Temp image inserted, starting upload");try{const r=new FormData;r.append("image",b),console.log("Uploading to server...");const{data:u}=await k.upload(N.blog.uploadImage,r);console.log("Upload successful, image URL:",u.url);const P=v.current.querySelector('.image-wrapper[data-temp="true"]');if(P){const Z=`<div class="image-wrapper" contenteditable="false"><img src="${u.url}" class="blog-image" alt="Blog image" /></div><p><br></p>`;P.outerHTML=Z,console.log("Image inserted successfully")}else console.warn("Could not find temp image wrapper")}catch(r){console.error("Error uploading image:",r);const u=v.current.querySelector('.image-wrapper[data-temp="true"]');u&&u.remove(),await d.alert(`Failed to upload image: ${r.message}`,"Upload Error")}setTimeout(()=>{v.current.querySelectorAll(".image-wrapper").forEach(u=>{u.hasAttribute("data-listener")||(u.setAttribute("data-listener","true"),u.addEventListener("click",function(){this.classList.toggle("selected")}))})},0)},A.readAsDataURL(b),g.target.value=""},I=g=>{if(g.key==="Backspace"||g.key==="Delete"){const b=window.getSelection();if(b.rangeCount>0){const A=b.getRangeAt(0),T=A.startContainer;let t=null;if(g.key==="Backspace"){const u=(T.nodeType===3||A.startOffset===0)&&T.previousSibling;u&&u.classList&&u.classList.contains("image-wrapper")&&(t=u)}else if(g.key==="Delete"){const u=T.nodeType===3?T.nextSibling:T.childNodes[A.startOffset];u&&u.classList&&u.classList.contains("image-wrapper")&&(t=u)}const r=v.current.querySelector(".image-wrapper.selected");if(r&&(t=r),t){g.preventDefault(),t.remove();return}}}},F=()=>{const g=v.current.innerHTML;s({title:m,content:g,excerpt:v.current.innerText.substring(0,150)})};return e.jsx("div",{className:"content-editor-overlay",children:e.jsxs("div",{className:"content-editor-modal",children:[e.jsx("div",{className:"editor-header",children:e.jsx("input",{type:"text",placeholder:"Post Title",value:m,onChange:g=>h(g.target.value),className:"title-input"})}),e.jsxs("div",{className:"editor-toolbar",children:[e.jsx("button",{type:"button",onClick:()=>C("bold"),className:"toolbar-btn",title:"Bold",children:e.jsx(xe,{size:18})}),e.jsx("button",{type:"button",onClick:()=>C("italic"),className:"toolbar-btn",title:"Italic",children:e.jsx(ue,{size:18})}),e.jsx("button",{type:"button",onClick:()=>C("underline"),className:"toolbar-btn",title:"Underline",children:e.jsx(fe,{size:18})}),e.jsx("div",{className:"toolbar-divider"}),e.jsx("button",{type:"button",onClick:l,className:"toolbar-btn",title:"Insert Link",children:e.jsx(pe,{size:18})}),e.jsx("button",{type:"button",onClick:()=>S.current.click(),className:"toolbar-btn",title:"Insert Image",children:e.jsx(ge,{size:18})}),e.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:R,style:{display:"none"}})]}),e.jsx("div",{ref:v,contentEditable:!0,className:"editor-content",onKeyDown:I,suppressContentEditableWarning:!0}),e.jsxs("div",{className:"editor-actions",children:[e.jsx("button",{onClick:n,className:"btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:F,className:"btn-primary",children:"Save Post"})]}),j&&e.jsx("div",{className:"link-modal-overlay",onClick:()=>x(!1),children:e.jsxs("div",{className:"link-modal",onClick:g=>g.stopPropagation(),children:[e.jsx("h3",{children:"Insert Link"}),e.jsx("input",{type:"text",placeholder:"Link text",value:f,onChange:g=>y(g.target.value),className:"link-input"}),e.jsx("input",{type:"url",placeholder:"URL (https://...)",value:w,onChange:g=>p(g.target.value),className:"link-input"}),e.jsxs("div",{className:"link-modal-actions",children:[e.jsx("button",{onClick:()=>x(!1),className:"btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:D,className:"btn-primary",children:"Insert"})]})]})})]})})}function Re(){const s=q(),[n,o]=a.useState(!1),[d,m]=a.useState([]),[h,i]=a.useState(null),[_,j]=a.useState(!0),[x,f]=a.useState("");a.useEffect(()=>{y()},[]);const y=async()=>{try{j(!0);const{data:c}=await k.get(N.admin.blogPosts);m(c.posts)}catch(c){f(z.getErrorMessage(c))}finally{j(!1)}},w=async c=>{try{if(h){const{data:C}=await k.put(N.blog.update(h.id),c);m(d.map(l=>l.id===h.id?C.post:l)),i(null)}else{const{data:C}=await k.post(N.blog.create,c);m([C.post,...d])}o(!1)}catch(C){await s.alert(z.getErrorMessage(C),"Error")}},p=c=>{i(c),o(!0)},v=()=>{o(!1),i(null)},S=async c=>{if(await s.confirm("Are you sure you want to delete this post?","Confirm Delete",{variant:"danger"}))try{await k.delete(N.blog.delete(c)),m(d.filter(l=>l.id!==c))}catch(l){await s.alert(z.getErrorMessage(l),"Error")}};return _?e.jsxs("div",{className:"admin-content",children:[e.jsx("div",{className:"traffic-toolbar",children:e.jsx("div",{className:"toolbar-top",children:e.jsx("div",{className:"title",children:"Content"})})}),e.jsx(V,{cards:6,type:"content"})]}):x?e.jsxs("div",{style:{padding:"2rem",color:"#b91c1c"},children:["Error: ",x]}):e.jsxs("div",{className:"admin-content",children:[e.jsxs("div",{className:"traffic-toolbar",children:[e.jsxs("div",{className:"toolbar-top",children:[e.jsx("div",{className:"title",children:"Content"}),e.jsx("button",{className:"add-content-btn",onClick:()=>o(!0),title:"Add Content",children:e.jsx(je,{size:20})})]}),e.jsxs("div",{className:"traffic-chip-row",children:[e.jsx("button",{className:"traffic-chip",type:"button",children:"All Posts"}),e.jsx("button",{className:"traffic-chip",type:"button",children:"Drafts"}),e.jsx("button",{className:"traffic-chip",type:"button",children:"Categories"})]})]}),e.jsx("div",{className:"card-grid",children:d.map(c=>e.jsxs("div",{className:"content-card",children:[e.jsx("div",{className:"content-title",children:c.title}),e.jsx("div",{className:"content-excerpt",children:c.excerpt}),e.jsxs("div",{className:"row-actions",children:[e.jsx("button",{className:"btn small",onClick:()=>p(c),children:"Edit"}),e.jsx("button",{className:"btn small",children:"Publish"}),e.jsx("button",{className:"btn small danger",onClick:()=>S(c.id),children:"Delete"})]})]},c.id))}),n&&e.jsx(Le,{onSave:w,onCancel:v,initialPost:h})]})}const Me=({count:s=6})=>{const n={backgroundColor:"#f0f0f0",borderRadius:"8px",animation:"pulse 1.5s ease-in-out infinite"};return e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:16,padding:16},children:Array.from({length:s}).map((o,d)=>e.jsxs("div",{style:{position:"relative",background:"#ffffff",border:"1px solid #e1e5e9",borderRadius:14,padding:0,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:4,background:"#000000"}}),e.jsxs("div",{style:{padding:"14px 16px 14px 20px",display:"flex",alignItems:"center",gap:14},children:[e.jsx("div",{style:{width:52,height:52,minWidth:52,borderRadius:12,backgroundColor:"#f0f0f0",animation:"pulse 1.5s ease-in-out infinite"}}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:8},children:[e.jsx("div",{style:{...n,height:"16px",width:"60%"}}),e.jsx("div",{style:{...n,height:"14px",width:"40%"}})]}),e.jsx("div",{style:{...n,height:"20px",width:"60px",borderRadius:"12px"}})]})]},d))})};function $(s){const n=new Date(s),d=new Date-n,m=Math.floor(d/(1e3*60)),h=Math.floor(d/(1e3*60*60)),i=Math.floor(d/(1e3*60*60*24));return m<1?"Just now":m<60?`${m}m ago`:h<24?`${h}h ago`:i<7?`${i}d ago`:n.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}const U={instagram:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":!0,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"ig-small-sessions",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#f58529"}),e.jsx("stop",{offset:"50%",stopColor:"#dd2a7b"}),e.jsx("stop",{offset:"100%",stopColor:"#8134af"})]})}),e.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",fill:"url(#ig-small-sessions)"}),e.jsx("circle",{cx:"12",cy:"12",r:"4.5",fill:"none",stroke:"#fff",strokeWidth:"2"}),e.jsx("circle",{cx:"17",cy:"7",r:"1.3",fill:"#fff"})]}),facebook:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":!0,children:[e.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2",fill:"#1877f2"}),e.jsx("path",{d:"M16 8h-2c-.5 0-1 .5-1 1v2h3l-.5 3h-2.5v7h-3v-7H8v-3h2V9c0-2 1.5-4 4-4h2v3z",fill:"#fff"})]}),youtube:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":!0,children:[e.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"3",fill:"#ff0000"}),e.jsx("polygon",{points:"10,9 16,12 10,15",fill:"#ffffff"})]}),google:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":!0,children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),other:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":!0,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#666"}),e.jsx("path",{d:"M2 12h20M12 2v20",stroke:"#fff",strokeWidth:"1.5",opacity:"0.6"}),e.jsx("circle",{cx:"12",cy:"12",r:"5",fill:"none",stroke:"#fff",strokeWidth:"1.5",opacity:"0.9"})]})};function We(){const[s,n]=a.useState(!0),[o,d]=a.useState(""),[m,h]=a.useState([]),[i,_]=a.useState(0),[j,x]=a.useState(""),[f,y]=a.useState(""),[w,p]=a.useState(""),[v,S]=a.useState(!0),[c,C]=a.useState(null),[l,D]=a.useState(null),[R,I]=a.useState([]),[F,g]=a.useState(!1);async function b(t=0){try{n(!0);const r={};j&&(r.source=j),f&&(r.user_id=f),w&&(r.visitor_id=w),r.limit="50",r.offset=String(t*50);const{data:u}=await k.get(G(N.admin.sessions,r));h(Array.isArray(u.sessions)?u.sessions:[]),_(t),d("")}catch(r){d(z.getErrorMessage(r)),h([])}finally{n(!1)}}async function A(t){try{C(t),g(!0),D(null),I([]);const[r,u]=await Promise.all([k.get(N.admin.sessionById(t)),k.get(N.admin.sessionEvents(t))]);D(r.data.session||null),I(Array.isArray(u.data.events)?u.data.events:[])}catch(r){d(z.getErrorMessage(r))}}if(a.useEffect(()=>{b(0)},[]),a.useEffect(()=>{b(0)},[j]),s)return e.jsxs("div",{className:"admin-traffic",children:[e.jsx("div",{className:"traffic-toolbar",children:e.jsx("div",{className:"toolbar-top",children:e.jsx("div",{className:"title",children:"Sessions"})})}),e.jsx(Me,{count:8})]});if(o)return e.jsxs("div",{style:{padding:16,color:"#b91c1c"},children:["Error: ",o]});const T=t=>t.ended_at||Date.now()-new Date(t.last_seen_at).getTime()>1800*1e3;return e.jsxs("div",{className:"admin-traffic",children:[e.jsx("div",{className:"traffic-toolbar",children:e.jsx("div",{className:"toolbar-top",children:e.jsx("div",{className:"title",children:"Sessions"})})}),e.jsxs("div",{className:"traffic-table-wrap",style:{display:"grid",gridTemplateColumns:v?"1fr 300px":"1fr",gap:12,alignItems:"start",marginTop:16},children:[e.jsx("div",{className:"table-card",style:{background:"transparent",border:"none"},children:e.jsxs("div",{style:{padding:16},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:16},children:m.map(t=>e.jsxs("button",{onClick:()=>A(t.session_id),style:{position:"relative",textAlign:"left",background:"#ffffff",borderRadius:14,padding:0,display:"flex",flexDirection:"column",cursor:"pointer",overflow:"hidden",transition:"all 0.2s ease",borderColor:"#e1e5e9"},onMouseEnter:r=>{r.currentTarget.style.transform="translateY(-2px)",r.currentTarget.style.borderColor="#000000"},onMouseLeave:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.borderColor="#e1e5e9"},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:4,background:"#000000"}}),e.jsxs("div",{style:{padding:"14px 16px 14px 20px",display:"flex",alignItems:"center",gap:14},children:[e.jsxs("div",{style:{width:52,height:52,minWidth:52,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"center",background:"#f8f9fa",border:"2px solid #e5e7eb",position:"relative"},children:[U[t.visitor_source||"other"]||U.other,e.jsx("div",{style:{position:"absolute",bottom:-6,left:"50%",transform:"translateX(-50%)",background:"#111",color:"#fff",fontSize:9,fontWeight:300,padding:"2px 6px",borderRadius:4,whiteSpace:"nowrap",border:"1.5px solid #fff"},children:t.visitor_source||"other"})]}),e.jsxs("div",{style:{flex:1,display:"grid",gridTemplateColumns:"1fr 1fr",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",fontWeight:300,marginBottom:3},children:"Started"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#111"},children:$(t.started_at)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",fontWeight:300,marginBottom:3},children:"Last Seen"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#111"},children:$(t.last_seen_at)})]}),e.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",alignItems:"center",gap:6,marginTop:4},children:[e.jsxs("div",{style:{background:"#f3f4f6",padding:"4px 10px",borderRadius:6,display:"inline-flex",alignItems:"center",gap:4},children:[e.jsx("span",{style:{fontSize:11,color:"#666",fontWeight:300},children:"Source"}),e.jsx("span",{style:{fontSize:12,fontWeight:300,color:"#111"},children:t.source||"other"})]}),e.jsxs("div",{style:{background:"#f3f4f6",padding:"4px 10px",borderRadius:6,display:"inline-flex",alignItems:"center",gap:4},children:[e.jsx("span",{style:{fontSize:11,color:"#666",fontWeight:300},children:"Pages"}),e.jsx("span",{style:{fontSize:12,fontWeight:300,color:"#111"},children:t.page_count})]})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx("span",{style:{fontSize:11,fontWeight:600,padding:"6px 12px",borderRadius:6,border:"2px solid",borderColor:T(t)?"#e5e7eb":"#86efac",color:T(t)?"#6b7280":"#166534",background:T(t)?"#f9fafb":"#dcfce7",minWidth:70,textAlign:"center"},children:T(t)?"Ended":"Active"})})]})]},t.session_id))}),e.jsxs("div",{className:"pagination-controls",style:{marginTop:12},children:[e.jsx("button",{className:"btn pagination-btn",onClick:()=>{i>0&&b(i-1)},disabled:i===0,style:{opacity:i===0?.5:1},children:"Previous"}),e.jsx("button",{className:"btn pagination-btn",onClick:()=>b(i+1),children:"Next"})]})]})}),v&&e.jsxs("aside",{className:"filters-card",children:[e.jsx("div",{className:"filters-header",children:"Filters"}),e.jsxs("div",{className:"filters-body",children:[e.jsxs("label",{className:"field",children:[e.jsx("div",{className:"label",children:"Source"}),e.jsxs("select",{value:j,onChange:t=>x(t.target.value),children:[e.jsx("option",{value:"",children:"All sources"}),e.jsx("option",{value:"instagram",children:"Instagram"}),e.jsx("option",{value:"facebook",children:"Facebook"}),e.jsx("option",{value:"youtube",children:"YouTube"}),e.jsx("option",{value:"google",children:"Google"}),e.jsx("option",{value:"other",children:"Others"})]})]}),e.jsxs("label",{className:"field",children:[e.jsx("div",{className:"label",children:"User ID"}),e.jsx("input",{value:f,onChange:t=>y(t.target.value),placeholder:"UUID"})]}),e.jsxs("label",{className:"field",children:[e.jsx("div",{className:"label",children:"Visitor ID"}),e.jsx("input",{value:w,onChange:t=>p(t.target.value),placeholder:"UUID"})]}),e.jsxs("div",{className:"filter-buttons",children:[e.jsx("button",{className:"btn primary",onClick:()=>b(0),children:"Apply"}),e.jsx("button",{className:"btn",onClick:()=>{x(""),y(""),p(""),b(0)},children:"Reset"})]})]})]})]}),F&&c&&e.jsx("div",{className:"modal-overlay",onClick:()=>g(!1),children:e.jsxs("div",{className:"modal-content session-details-modal",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:42,height:42,borderRadius:10,background:"linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(9, 105, 218, 0.25)"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M12 1v6m0 6v6M5.6 5.6l4.2 4.2m4.2 4.2l4.2 4.2M1 12h6m6 0h6M5.6 18.4l4.2-4.2m4.2-4.2l4.2-4.2"})]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"modal-title",style:{marginBottom:2},children:"Session Details"}),e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)",fontWeight:500},children:"Complete session analytics & tracking data"})]})]}),e.jsx("button",{className:"modal-close",onClick:()=>g(!1),children:"×"})]}),e.jsx("div",{className:"modal-body",children:l?e.jsxs("div",{className:"session-details-content",children:[e.jsxs("div",{className:"session-status-banner",children:[e.jsxs("div",{className:"status-sources",children:[e.jsxs("div",{className:"source-item",children:[e.jsx("div",{className:"source-icon",children:U[l.visitor_source||"other"]||U.other}),e.jsxs("div",{className:"source-info",children:[e.jsx("div",{className:"source-label",children:"Visitor Source"}),e.jsx("div",{className:"source-value",children:l.visitor_source||"other"})]})]}),e.jsx("div",{className:"source-arrow",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})}),e.jsxs("div",{className:"source-item",children:[e.jsx("div",{className:"source-icon",children:U[l.source||"other"]||U.other}),e.jsxs("div",{className:"source-info",children:[e.jsx("div",{className:"source-label",children:"Session Source"}),e.jsx("div",{className:"source-value",children:l.source||"other"})]})]})]}),e.jsx("div",{className:"status-badge-container",children:e.jsxs("span",{className:`status-badge ${l.ended_at||Date.now()-new Date(l.last_seen_at).getTime()>1800*1e3?"ended":"active"}`,children:[e.jsx("span",{className:"status-dot"}),l.ended_at||Date.now()-new Date(l.last_seen_at).getTime()>1800*1e3?"Ended":"Active"]})})]}),e.jsxs("div",{className:"session-metrics-grid",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)"},children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),e.jsxs("div",{className:"metric-info",children:[e.jsx("div",{className:"metric-label",children:"Started"}),e.jsx("div",{className:"metric-value",children:$(l.started_at)}),e.jsx("div",{className:"metric-subtitle",children:new Date(l.started_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon",style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)"},children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})})}),e.jsxs("div",{className:"metric-info",children:[e.jsx("div",{className:"metric-label",children:"Last Seen"}),e.jsx("div",{className:"metric-value",children:$(l.last_seen_at)}),e.jsx("div",{className:"metric-subtitle",children:new Date(l.last_seen_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon",style:{background:"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)"},children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),e.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]})}),e.jsxs("div",{className:"metric-info",children:[e.jsx("div",{className:"metric-label",children:"Pages Viewed"}),e.jsx("div",{className:"metric-value",children:l.page_count}),e.jsx("div",{className:"metric-subtitle",children:l.page_count===1?"Single page":"Multiple pages"})]})]})]}),e.jsxs("div",{className:"info-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),"Session Information"]}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("div",{className:"info-label",children:"Session ID"}),e.jsx("div",{className:"info-value info-code",children:l.id})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("div",{className:"info-label",children:"Visitor ID"}),e.jsx("div",{className:"info-value info-code",children:l.visitor_id})]}),e.jsxs("div",{className:"info-item full-width",children:[e.jsx("div",{className:"info-label",children:"User"}),e.jsx("div",{className:"info-value",children:l.user_id?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("img",{src:l.user_avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(l.user_name||l.user_email||"User")}&background=0969da&color=fff&size=40`,alt:l.user_name||l.user_email,style:{width:40,height:40,borderRadius:"50%",objectFit:"cover",border:"2px solid #e5e7eb"}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#111",marginBottom:2},children:l.user_name||l.user_email}),l.user_name&&l.user_email&&e.jsx("div",{style:{fontSize:12,color:"#666"},children:l.user_email})]})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:"50%",background:"#f3f4f6",border:"2px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#9ca3af",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),e.jsx("span",{style:{color:"var(--text-muted)",fontStyle:"italic",fontSize:14},children:"Guest User"})]})})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("div",{className:"info-label",children:"Landing Path"}),e.jsx("div",{className:"info-value info-path",children:l.landing_path||"/"})]}),l.referrer!==void 0&&e.jsxs("div",{className:"info-item full-width",children:[e.jsx("div",{className:"info-label",children:"Referrer"}),e.jsx("div",{className:"info-value info-url",children:l.referrer||e.jsx("span",{style:{color:"var(--text-muted)",fontStyle:"italic"},children:"Direct traffic"})})]})]})]}),e.jsxs("div",{className:"info-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),"Technical Details"]}),e.jsxs("div",{className:"info-grid",children:[l.ip&&e.jsxs("div",{className:"info-item",children:[e.jsx("div",{className:"info-label",children:"IP Address"}),e.jsx("div",{className:"info-value info-code",children:l.ip})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("div",{className:"info-label",children:"Session Ended"}),e.jsx("div",{className:"info-value",children:l.ended_at||Date.now()-new Date(l.last_seen_at).getTime()>1800*1e3?l.ended_at?new Date(l.ended_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Ended (inferred)":e.jsx("span",{style:{color:"#10b981",fontWeight:600},children:"Active Session"})})]}),l.user_agent&&e.jsxs("div",{className:"info-item full-width",children:[e.jsx("div",{className:"info-label",children:"User Agent"}),e.jsx("div",{className:"info-value info-small",children:l.user_agent})]})]})]}),e.jsxs("div",{className:"info-section events-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),"Session Events Timeline",e.jsxs("span",{className:"event-count",children:[R.length," ",R.length===1?"event":"events"]})]}),R.length>0?e.jsx("div",{className:"events-timeline",children:R.map((t,r)=>e.jsxs("div",{className:"event-item",children:[e.jsxs("div",{className:"event-marker",children:[e.jsx("div",{className:"event-dot"}),r!==R.length-1&&e.jsx("div",{className:"event-line"})]}),e.jsxs("div",{className:"event-content",children:[e.jsxs("div",{className:"event-header",children:[e.jsx("div",{className:"event-time",children:$(t.occurred_at)}),e.jsx("div",{className:"event-time-full",children:new Date(t.occurred_at).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),e.jsxs("div",{className:"event-path",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"})]}),t.path||"/"]}),t.referrer&&e.jsxs("div",{className:"event-referrer",children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),e.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),"from ",t.referrer]})]})]},r))}):e.jsxs("div",{className:"empty-state",children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),e.jsx("div",{className:"empty-title",children:"No Events Recorded"}),e.jsx("div",{className:"empty-description",children:"This session doesn't have any tracked events yet."})]})]})]}):e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("div",{style:{marginTop:12,fontSize:14,color:"var(--text-muted)"},children:"Loading session details..."})]})})]})})]})}function De(){const[s,n]=a.useState(!0),[o,d]=a.useState(""),[m,h]=a.useState(null),[i,_]=a.useState([]),[j,x]=a.useState("total_exec_time"),[f,y]=a.useState(!1);a.useEffect(()=>{w()},[j]);async function w(){n(!0),d("");try{const[c,C]=await Promise.all([k.get("/api/admin/performance/summary"),k.get(`/api/admin/performance/queries?order_by=${j}&limit=20`)]);h(c.data),_(C.data.queries)}catch(c){d(z.getErrorMessage(c))}finally{n(!1)}}async function p(){if(confirm("Reset all query statistics? This will clear all tracked performance data.")){y(!0);try{await k.post("/api/admin/performance/reset"),await w()}catch(c){alert(z.getErrorMessage(c))}finally{y(!1)}}}if(s)return e.jsxs("div",{className:"admin-content",children:[e.jsx("div",{className:"traffic-toolbar",children:e.jsx("div",{className:"toolbar-top",children:e.jsx("div",{className:"title",children:"Database Performance"})})}),e.jsx(V,{cards:4,type:"stat"})]});if(o)return e.jsxs("div",{style:{padding:"1rem",color:"#b91c1c"},children:["Error: ",o,o.includes("not enabled")&&e.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.9rem"},children:["Run the migration: ",e.jsx("code",{children:"node server/migrations/run.js enable_pg_stat_statements up"})]})]});const v=m?.query_stats||{},S=m?.connections||{};return e.jsxs("div",{className:"admin-content",children:[e.jsxs("div",{className:"traffic-toolbar",children:[e.jsxs("div",{className:"toolbar-top",children:[e.jsx("div",{className:"title",children:"Database Performance"}),e.jsxs("button",{onClick:p,disabled:f,style:{padding:"0.5rem 1rem",borderRadius:8,border:"1px solid #d0d0d0",background:"#fff",color:"#333",fontSize:13,fontWeight:600,cursor:f?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:6,opacity:f?.6:1},children:[e.jsx(ye,{size:14}),f?"Resetting...":"Reset Stats"]})]}),e.jsx("div",{className:"traffic-chip-row",children:e.jsxs("div",{style:{fontSize:12,color:"#666"},children:["pg_stat_statements • Database: ",m?.database_size||"N/A"]})})]}),e.jsxs("div",{className:"card-grid",children:[e.jsx(O,{icon:K,title:"Total Queries",value:H(v.total_queries),subtitle:`${H(v.total_executions)} executions`}),e.jsx(O,{icon:ve,title:"Avg Query Time",value:`${v.avg_query_time_ms||0}ms`,subtitle:`Slowest: ${v.slowest_query_ms||0}ms`}),e.jsx(O,{icon:be,title:"Cache Hit Ratio",value:`${v.overall_cache_hit_ratio||0}%`,subtitle:"Shared buffer hits",color:Y(v.overall_cache_hit_ratio)}),e.jsx(O,{icon:J,title:"Connections",value:H(S.active_connections),subtitle:`${S.active_queries} active • ${S.idle_connections} idle`})]}),e.jsxs("div",{style:{border:"1px solid #d0d0d0",borderRadius:12,padding:"1.5rem",background:"#fff",boxShadow:"0 1px 3px rgba(0,0,0,0.08)",marginTop:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid #e5e5e5"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(X,{size:18,style:{color:"#000"}}),e.jsx("h3",{style:{fontSize:16,fontWeight:800,color:"#000",margin:0},children:"Slow Queries"})]}),e.jsxs("select",{value:j,onChange:c=>x(c.target.value),style:{padding:"0.5rem",borderRadius:6,border:"1px solid #d0d0d0",fontSize:12,fontWeight:600,background:"#fff",cursor:"pointer"},children:[e.jsx("option",{value:"total_exec_time",children:"Total Time"}),e.jsx("option",{value:"mean_exec_time",children:"Avg Time"}),e.jsx("option",{value:"max_exec_time",children:"Max Time"}),e.jsx("option",{value:"calls",children:"Execution Count"})]})]}),i.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"No query data available yet. Queries will appear as they are executed."}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",fontSize:13,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid #ddd"},children:[e.jsx("th",{style:{textAlign:"left",padding:"0.75rem",fontWeight:700,color:"#666",fontSize:11,textTransform:"uppercase"},children:"Query"}),e.jsx("th",{style:{textAlign:"right",padding:"0.75rem",fontWeight:700,color:"#666",fontSize:11,textTransform:"uppercase"},children:"Calls"}),e.jsx("th",{style:{textAlign:"right",padding:"0.75rem",fontWeight:700,color:"#666",fontSize:11,textTransform:"uppercase"},children:"Total (ms)"}),e.jsx("th",{style:{textAlign:"right",padding:"0.75rem",fontWeight:700,color:"#666",fontSize:11,textTransform:"uppercase"},children:"Avg (ms)"}),e.jsx("th",{style:{textAlign:"right",padding:"0.75rem",fontWeight:700,color:"#666",fontSize:11,textTransform:"uppercase"},children:"Max (ms)"}),e.jsx("th",{style:{textAlign:"right",padding:"0.75rem",fontWeight:700,color:"#666",fontSize:11,textTransform:"uppercase"},children:"Cache %"})]})}),e.jsx("tbody",{children:i.map((c,C)=>e.jsxs("tr",{style:{borderBottom:"1px solid #eee",transition:"background 0.15s ease"},onMouseEnter:l=>l.currentTarget.style.background="#f9f9f9",onMouseLeave:l=>l.currentTarget.style.background="transparent",children:[e.jsx("td",{style:{padding:"0.75rem",maxWidth:400},children:e.jsx("code",{style:{fontSize:12,color:"#333",display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Ie(c.query)})}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:600},children:H(c.calls)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:600,color:Be(c.total_exec_time_ms)},children:H(c.total_exec_time_ms)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:600},children:c.mean_exec_time_ms}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:600},children:c.max_exec_time_ms}),e.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:600,color:Y(c.cache_hit_ratio)},children:[c.cache_hit_ratio,"%"]})]},C))})]})})]})]})}function O({icon:s,title:n,value:o,subtitle:d,color:m}){return e.jsxs("div",{style:{border:"1px solid #d0d0d0",borderRadius:12,padding:"1.25rem",background:"#fff",boxShadow:"0 1px 3px rgba(0,0,0,0.08)",transition:"transform 0.2s ease, box-shadow 0.2s ease",cursor:"default"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.12)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.08)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[e.jsx("div",{style:{fontSize:11,color:"#666",textTransform:"uppercase",fontWeight:700,letterSpacing:"0.5px"},children:n}),s&&e.jsx(s,{size:20,style:{color:m||"#666",opacity:.7}})]}),e.jsx("div",{style:{fontSize:28,fontWeight:900,color:"#111",lineHeight:1},children:o}),d&&e.jsx("div",{style:{fontSize:12,color:"#888",marginTop:8},children:d})]})}function H(s){return s==null?"0":Number(s).toLocaleString()}function Ie(s){const n=s.replace(/\s+/g," ").trim();return n.length>100?n.substring(0,100)+"...":n}function Be(s){return s>1e3?"#dc2626":s>500?"#ea580c":s>100?"#ca8a04":"#059669"}function Y(s){return s>=95?"#059669":s>=80?"#ca8a04":s>=60?"#ea580c":"#dc2626"}function $e(){const[s,n]=a.useState(null),[o,d]=a.useState(!1),m=se(),h=ie();a.useEffect(()=>{let x=!1;async function f(){try{const{data:y}=await k.get(N.admin.dashboard);x||n(y.user)}catch(y){if(ee.isAuthError(y)){window.location.href="/not-accessible";return}}}return f(),()=>{x=!0}},[]);const i=a.useMemo(()=>[{key:"overview",label:"Overview",icon:ke,path:"/admin/overview"},{key:"sessions",label:"Sessions",icon:J,path:"/admin/sessions"},{key:"users",label:"Users",icon:Q,path:"/admin/users"},{key:"content",label:"Content",icon:we,path:"/admin/content"},{key:"performance",label:"Performance",icon:K,path:"/admin/performance"},{key:"settings",label:"Settings",icon:Se,path:"/admin/settings"}],[]),_=h.pathname,j=i.find(x=>x.path===_)?.key||"overview";return e.jsxs("div",{style:{display:"flex",minHeight:"calc(100vh - 64px)",background:"#ebebeb",position:"relative"},children:[e.jsx("button",{onClick:()=>d(!o),style:{position:"fixed",top:80,left:16,zIndex:1e3,background:"#000",border:"1px solid #333",borderRadius:8,padding:"0.5rem",cursor:"pointer",display:"none",color:"#fff"},className:"mobile-menu-btn",children:o?e.jsx(Ne,{size:20}):e.jsx(Ce,{size:20})}),o&&e.jsx("div",{onClick:()=>d(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:998,display:"none"},className:"sidebar-overlay"}),e.jsxs("aside",{style:{width:260,borderRight:"1px solid #111",background:"#000",position:"fixed",height:"calc(100vh - 64px)",paddingTop:60,zIndex:999,transition:"transform 0.3s ease"},className:`admin-sidebar ${o?"sidebar-open":""}`,children:[e.jsxs("div",{style:{padding:"1rem 1rem 0.5rem 1rem"},children:[e.jsx("div",{style:{fontSize:18,fontWeight:800,color:"#fff"},children:"Admin"}),e.jsx("div",{style:{fontSize:12,color:"#bbb"},children:"Signed in as"}),e.jsx("div",{style:{fontSize:13,color:"#ddd",wordBreak:"break-all"},children:s?.email})]}),e.jsx("div",{style:{padding:"0.75rem 0.5rem"},children:i.map(x=>e.jsxs("button",{onClick:()=>{m(x.path),d(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:10,padding:"0.6rem 0.75rem",background:j===x.key?"#fff":"transparent",color:j===x.key?"#111":"#ddd",border:"1px solid "+(j===x.key?"#fff":"#333"),borderRadius:8,margin:"0.25rem 0",cursor:"pointer",textAlign:"left"},children:[e.jsx(x.icon,{size:16,style:{color:j===x.key?"#111":"#ddd"}}),e.jsx("span",{style:{fontWeight:700,fontSize:14},children:x.label})]},x.key))})]}),e.jsx("section",{style:{flex:1,padding:"1.25rem",marginLeft:260},className:"admin-main-content",children:e.jsxs(re,{children:[e.jsx(W,{index:!0,element:e.jsx(ne,{to:"/admin/overview",replace:!0})}),e.jsx(W,{path:"overview",element:e.jsx(Te,{})}),e.jsx(W,{path:"sessions",element:e.jsx(We,{})}),e.jsx(W,{path:"users",element:e.jsx(Ae,{})}),e.jsx(W,{path:"content",element:e.jsx(Re,{})}),e.jsx(W,{path:"performance",element:e.jsx(De,{})}),e.jsx(W,{path:"settings",element:e.jsx(_e,{})})]})}),e.jsx("style",{children:`
        @media (max-width: 768px) {
          .mobile-menu-btn {
            display: block !important;
          }
          .sidebar-overlay {
            display: block !important;
          }
          .admin-sidebar {
            transform: translateX(-100%);
          }
          .admin-sidebar.sidebar-open {
            transform: translateX(0);
          }
          .admin-main-content {
            margin-left: 0 !important;
          }
        }
        @media (min-width: 769px) {
          .admin-sidebar {
            position: fixed !important;
            transform: translateX(0) !important;
          }
        }
      `})]})}export{$e as default};
